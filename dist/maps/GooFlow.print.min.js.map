{"version":3,"sources":["GooFlow.print.js"],"names":["global","factory","define","amd","module","exports","require","$","GooFlow","window","this","prototype","print","appendContent","$el","content","append","jquery","clone","opt","fn","printThis","options","extend","defaults","$element","jQuery","strFrameName","Date","getTime","location","hostname","document","domain","navigator","userAgent","match","iframeSrc","printI","createElement","name","id","className","body","appendChild","src","appendTo","$iframe","debug","css","position","width","height","left","top","setTimeout","doctype","win","doc","doctypeString","get","contentWindow","contentDocument","open","write","close","baseURL","$body","$content","$doc","contents","$head","find","$base","margin","padding","background","base","length","attr","protocol","host","each","href","media","pageTitle","header","printContainer","children","footer","hasClass","frames","focus","queryCommandSupported","execCommand","remove","printDelay","scale","max","_suitSize","printDiv","$workArea","wrap","parent","color","font","transform-origin","transform","URL","$title"],"mappings":"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","file":"../GooFlow.print.min.js","sourcesContent":["/*\r\n *  打印预览或另存为PDF功能，需要依赖:\r\n * ../plugin/printThis.js\r\n */\r\n;(function ( global, factory ) {\r\n\t'use strict';\r\n\tif ( typeof define !== 'undefined' && define.amd ) { // export as AMD...\r\n\t\tdefine( ['jquery','GooFlow'], factory );\r\n\t}\r\n\telse if ( typeof module !== 'undefined' && module.exports ) { // ...or as browserify\r\n\t\tfactory( require('jquery'), require('GooFlow') );\r\n\t}else\r\n\t\tfactory( global.$, global.GooFlow );\r\n\r\n}( typeof window !== 'undefined' ? window : this, function ( $,GooFlow ) {\r\n\tif(GooFlow.prototype.print && typeof GooFlow.prototype.print==='function'){\r\n\t\treturn;//防止多次载入\r\n\t}\r\n/*\r\n * printThis v1.12.2\r\n * @desc Printing plug-in for jQuery\r\n * @author Jason Day\r\n * 精简版 only for GooFlow\r\n */\r\n    (function($) {\r\n\r\n        function appendContent($el, content) {\r\n            if (!content) return;\r\n\r\n            // Simple test for a jQuery element\r\n            $el.append(content.jquery ? content.clone() : content);\r\n        }\r\n\r\n        function appendBody($body, $element, opt) {\r\n            // Clone for safety and convenience\r\n            // Calls clone(withDataAndEvents = true) to copy form values.\r\n            var $content = $element.clone();\r\n\r\n            if (opt.printContainer) {\r\n                // grab $.selector as container\r\n                $content.appendTo($body);\r\n            } else {\r\n                // otherwise just print interior elements of container\r\n                $content.each(function() {\r\n                    $(this).children().appendTo($body)\r\n                });\r\n            }\r\n        }\r\n\r\n        var opt;\r\n        $.fn.printThis = function(options) {\r\n            opt = $.extend({}, $.fn.printThis.defaults, options);\r\n            var $element = this instanceof jQuery ? this : $(this);\r\n\r\n            var strFrameName = \"printThis-\" + (new Date()).getTime();\r\n\r\n            if (window.location.hostname !== document.domain && navigator.userAgent.match(/msie/i)) {\r\n                // Ugly IE hacks due to IE not inheriting document.domain from parent\r\n                // checks if document.domain is set by comparing the host name against document.domain\r\n                var iframeSrc = 'javascript:document.write(\"<head><script>document.domain=\"' + document.domain + '\";</script></head><body></body>\")';\r\n                var printI = document.createElement('iframe');\r\n                printI.name = \"printIframe\";\r\n                printI.id = strFrameName;\r\n                printI.className = \"MSIE\";\r\n                document.body.appendChild(printI);\r\n                printI.src = iframeSrc;\r\n\r\n            } else {\r\n                // other browsers inherit document.domain, and IE works if document.domain is not explicitly set\r\n                var $frame = $(\"<iframe id='\" + strFrameName + \"' name='printIframe' />\");\r\n                $frame.appendTo(\"body\");\r\n            }\r\n\r\n            var $iframe = $(\"#\" + strFrameName);\r\n\r\n            // show frame if in debug mode\r\n            if (!opt.debug) $iframe.css({\r\n                position: \"absolute\",\r\n                width: \"0px\",\r\n                height: \"0px\",\r\n                left: \"-600px\",\r\n                top: \"-600px\"\r\n            });\r\n\r\n            // $iframe.ready() and $iframe.load were inconsistent between browsers\r\n            setTimeout(function() {\r\n\r\n                // Add doctype to fix the style difference between printing and render\r\n                function setDocType($iframe, doctype){\r\n                    var win, doc;\r\n                    win = $iframe.get(0);\r\n                    win = win.contentWindow || win.contentDocument || win;\r\n                    doc = win.document || win.contentDocument || win;\r\n                    doc.open();\r\n                    doc.write(doctype);\r\n                    doc.close();\r\n                }\r\n\r\n                if (opt.doctypeString){\r\n                    setDocType($iframe, opt.doctypeString);\r\n                }\r\n\r\n                var $doc = $iframe.contents(),\r\n                    $head = $doc.find(\"head\"),\r\n                    $body = $doc.find(\"body\"),\r\n                    $base = $('base'),\r\n                    baseURL;\r\n\t\t\t\t$body.css({height:'auto',margin:'0',padding:'0',background:'#fff'});\r\n                // add base tag to ensure elements use the parent domain\r\n                if (opt.base === true && $base.length > 0) {\r\n                    // take the base tag from the original page\r\n                    baseURL = $base.attr('href');\r\n                } else if (typeof opt.base === 'string') {\r\n                    // An exact base string is provided\r\n                    baseURL = opt.base;\r\n                } else {\r\n                    // Use the page URL as the base\r\n                    baseURL = document.location.protocol + '//' + document.location.host;\r\n                }\r\n\r\n                $head.append('<base href=\"' + baseURL + '\">');\r\n\r\n                $(\"link[rel=stylesheet]\").each(function() {\r\n                    var href = $(this).attr(\"href\");\r\n                    if (href) {\r\n                        var media = $(this).attr(\"media\") || \"all\";\r\n                        $head.append(\"<link type='text/css' rel='stylesheet' href='\" + href + \"' media='\" + media + \"'>\");\r\n                    }\r\n                });\r\n\r\n                // add title of the page\r\n                if (opt.pageTitle) $head.append(\"<title>\" + opt.pageTitle + \"</title>\");\r\n\r\n                // print header\r\n                appendContent($body, opt.header);\r\n\r\n                appendBody($body, $element, opt);\r\n\r\n                // print \"footer\"\r\n                appendContent($body, opt.footer);\r\n\r\n                setTimeout(function() {\r\n                    if ($iframe.hasClass(\"MSIE\")) {\r\n                        // check if the iframe was created with the ugly hack\r\n                        // and perform another ugly hack out of neccessity\r\n                        window.frames[\"printIframe\"].focus();\r\n                        $head.append(\"<script>  window.print(); </s\" + \"cript>\");\r\n                    } else {\r\n                        // proper method\r\n                        if (document.queryCommandSupported(\"print\")) {\r\n                            $iframe[0].contentWindow.document.execCommand(\"print\", false, null);\r\n                        } else {\r\n                            $iframe[0].contentWindow.focus();\r\n                            $iframe[0].contentWindow.print();\r\n                        }\r\n                    }\r\n\r\n                    // remove iframe after print\r\n                    if (!opt.debug) {\r\n                        setTimeout(function() {\r\n                            $iframe.remove();\r\n                        }, 1000);\r\n                    }\r\n\r\n                }, opt.printDelay);\r\n\r\n            }, 333);\r\n\r\n        };\r\n\r\n        // defaults\r\n        $.fn.printThis.defaults = {\r\n            debug: false,           // show the iframe for debugging\r\n            printContainer: true,   // print outer container/$.selector\r\n            pageTitle: \"\",          // add title to print page\r\n            printDelay: 333,        // variable print delay\r\n            header: null,           // prefix to html\r\n            footer: null,           // postfix to html\r\n            base: false,            // preserve the BASE tag, or accept a string for the URL\r\n            doctypeString: '<!DOCTYPE html>' // html doctype\r\n        };\r\n    })($);\r\n    ////////////////printThis.js END!\r\n\r\n\t//扩展定义打印预览或另存为PDF功能的方法\r\n\tGooFlow.prototype.print=function(scale){\r\n\t\tvar max=this._suitSize();\r\n\t\tif(!scale)  scale=1.0;\r\n\t\tmax.width+=100;max.height+=100;\r\n\t\tvar printDiv=this.$workArea.clone();\r\n\t\tprintDiv.css({\r\n\t\t\twidth:max.width+\"px\",height:max.height+\"px\"\r\n\t\t});\r\n\t\tprintDiv.children(\".GooFlow_work_group\").css({width:max.width+\"px\",height:max.height+\"px\"});\r\n\t\tprintDiv.children(\"svg\").css({width:max.width+\"px\",height:max.height+\"px\"});\r\n\t\tprintDiv.children(\".GooFlow_work_vml\").css({width:max.width+\"px\",height:max.height+\"px\"});\r\n\t\tprintDiv=printDiv.wrap('<div class=\"GooFlow GooFlow_work\" style=\"width:'\r\n\t\t\t+max.width+'px;height:'+max.height+'px; overflow:hidden\"></div>').parent();\r\n\t\tif(GooFlow.color.font){\r\n\t\t\tprintDiv.css(\"color\",GooFlow.color.font);\r\n\t\t}\r\n\t\tprintDiv.css({\"transform-origin\": \"top left\", transform:\"scale(\"+scale+\")\"}).printThis({\r\n\t\t\tbase:document.URL, pageTitle:this.$title\r\n\t\t});\r\n\t};\r\n\treturn GooFlow;\r\n}));\r\n"]}